package com.wiesfight.managers;

import main.com.wiesfight.dto.User;
import main.com.wiesfight.persistence.UserPersistence;
import android.content.Context;

import com.google.gson.Gson;
import com.parse.ParseException;
import com.parse.ParseObject;
import com.parse.ParseQuery;

public class UserManager {
	public static void putCurrentUserPersistence(UserPersistence user) {
		//user.pinInBackground("currentUser");
	}
	
	public static UserPersistence getCurrentUserPersistence(String installation) {
        ParseQuery<UserPersistence> query = ParseQuery.getQuery(UserPersistence.class);
    	query.whereEqualTo("Installation", installation);
        try {
			return query.getFirst();
		} catch (ParseException e) {
			return null;
		}
	}
	
	public static void putCurrentUser(User user, String installation) {
        UserPersistence userToEdit = getCurrentUserPersistence(installation);
        userToEdit.setUser(user);
        userToEdit.saveUserToDB();
        putCurrentUserPersistence(userToEdit);
	}
	
	public static User getCurrentUser(String installation) {
		return getCurrentUserPersistence(installation).getUser();
	}
}
